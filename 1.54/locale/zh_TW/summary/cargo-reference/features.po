msgid ""
msgstr ""
"Project-Id-Version: The Cargo Book\n"
"POT-Creation-Date: 2026-01-24T08:49:29Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Language: zh_TW\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/reference/features.md:1
msgid "Features"
msgstr ""

#: src/reference/features.md:3
msgid ""
"Cargo \"features\" provide a mechanism to express [conditional compilation]"
"(../../reference/conditional-compilation.md) and [optional dependencies]"
"(#optional-dependencies). A package defines a set of named features in the "
"`[features]` table of `Cargo.toml`, and each feature can either be enabled "
"or disabled. Features for the package being built can be enabled on the "
"command-line with flags such as `--features`. Features for dependencies can "
"be enabled in the dependency declaration in `Cargo.toml`."
msgstr ""

#: src/reference/features.md:10
msgid ""
"See also the [Features Examples](features-examples.md) chapter for some "
"examples of how features can be used."
msgstr ""

#: src/reference/features.md:16
msgid "The `[features]` section"
msgstr ""

#: src/reference/features.md:18
msgid ""
"Features are defined in the `[features]` table in `Cargo.toml`. Each feature "
"specifies an array of other features or optional dependencies that it "
"enables. The following examples illustrate how features could be used for a "
"2D image processing library where support for different image formats can be "
"optionally included:"
msgstr ""

#: src/reference/features.md:30
msgid ""
"With this feature defined, [`cfg` expressions](../../reference/conditional-"
"compilation.md) can be used to conditionally include code to support the "
"requested feature at compile time. For example, inside `lib.rs` of the "
"package could include this:"
msgstr ""

#: src/reference/features.md:35
msgid ""
"// This conditionally includes a module which implements WEBP support.\n"
msgstr ""

#: src/reference/features.md:36
msgid "\"webp\""
msgstr ""

#: src/reference/features.md:40
msgid ""
"Cargo sets features in the package using the `rustc` [`--cfg` flag](../../"
"rustc/command-line-arguments.md#option-cfg), and code can test for their "
"presence with the [`cfg` attribute](../../reference/conditional-compilation."
"md#the-cfg-attribute) or the [`cfg` macro](../../std/macro.cfg.html)."
msgstr ""

#: src/reference/features.md:43
msgid ""
"Features can list other features to enable. For example, the ICO image "
"format can contain BMP and PNG images, so when it is enabled, it should make "
"sure those other features are enabled, too:"
msgstr ""

#: src/reference/features.md:47
msgid ""
"```toml\n"
"[features]\n"
"bmp = []\n"
"png = []\n"
"ico = [\"bmp\", \"png\"]\n"
"webp = []\n"
"```"
msgstr ""

#: src/reference/features.md:55
msgid ""
"Feature names may include characters from the [Unicode XID standard](https://"
"unicode.org/reports/tr31/) (which includes most letters), and additionally "
"allows starting with `_` or digits `0` through `9`, and after the first "
"character may also contain `-`, `+`, or `.`."
msgstr ""

#: src/reference/features.md:60
msgid ""
"**Note**: [crates.io](https://crates.io/) imposes additional constraints on "
"feature name syntax that they must only be [ASCII alphanumeric](../../std/"
"primitive.char.html#method.is_ascii_alphanumeric) characters or `_`, `-`, or "
"`+`."
msgstr ""

#: src/reference/features.md:71
msgid "The `default` feature"
msgstr ""

#: src/reference/features.md:73
msgid ""
"By default, all features are disabled unless explicitly enabled. This can be "
"changed by specifying the `default` feature:"
msgstr ""

#: src/reference/features.md:76
msgid ""
"```toml\n"
"[features]\n"
"default = [\"ico\", \"webp\"]\n"
"bmp = []\n"
"png = []\n"
"ico = [\"bmp\", \"png\"]\n"
"webp = []\n"
"```"
msgstr ""

#: src/reference/features.md:85
msgid ""
"When the package is built, the `default` feature is enabled which in turn "
"enables the listed features. This behavior can be changed by:"
msgstr ""

#: src/reference/features.md:88
msgid ""
"The `--no-default-features` [command-line flag](#command-line-feature-"
"options) disables the default features of the package."
msgstr ""

#: src/reference/features.md:91
msgid ""
"The `default-features = false` option can be specified in a [dependency "
"declaration](#dependency-features)."
msgstr ""

#: src/reference/features.md:94
msgid ""
"**Note**: Be careful about choosing the default feature set. The default "
"features are a convenience that make it easier to use a package without "
"forcing the user to carefully select which features to enable for common "
"use, but there are some drawbacks. Dependencies automatically enable default "
"features unless `default-features = false` is specified. This can make it "
"difficult to ensure that the default features are not enabled, especially "
"for a dependency that appears multiple times in the dependency graph. Every "
"package must ensure that `default-features = false` is specified to avoid "
"enabling them."
msgstr ""

#: src/reference/features.md:104
msgid ""
"Another issue is that it can be a [SemVer incompatible change](#semver-"
"compatibility) to remove a feature from the default set, so you should be "
"confident that you will keep those features."
msgstr ""

#: src/reference/features.md:108
msgid "Optional dependencies"
msgstr ""

#: src/reference/features.md:110
msgid ""
"Dependencies can be marked \"optional\", which means they will not be "
"compiled by default. For example, let's say that our 2D image processing "
"library uses an external package to handle GIF images. This can be expressed "
"like this:"
msgstr ""

#: src/reference/features.md:114
msgid ""
"```toml\n"
"[dependencies]\n"
"gif = { version = \"0.11.1\", optional = true }\n"
"```"
msgstr ""

#: src/reference/features.md:119
msgid ""
"Optional dependencies implicitly define a feature of the same name as the "
"dependency. This means that the same `cfg(feature = \"gif\")` syntax can be "
"used in the code, and the dependency can be enabled just like a feature such "
"as `--features gif` (see [Command-line feature options](#command-line-"
"feature-options) below)."
msgstr ""

#: src/reference/features.md:125
msgid ""
"**Note**: A feature in the `[feature]` table cannot use the same name as a "
"dependency. Experimental support for enabling this and other extensions is "
"available on the nightly channel via [namespaced features](unstable."
"md#namespaced-features)."
msgstr ""

#: src/reference/features.md:130
msgid ""
"Explicitly defined features can enable optional dependencies, too. Just "
"include the name of the optional dependency in the feature list. For "
"example, let's say in order to support the AVIF image format, our library "
"needs two other dependencies to be enabled:"
msgstr ""

#: src/reference/features.md:135
msgid ""
"```toml\n"
"[dependencies]\n"
"ravif = { version = \"0.6.3\", optional = true }\n"
"rgb = { version = \"0.8.25\", optional = true }\n"
"\n"
"[features]\n"
"avif = [\"ravif\", \"rgb\"]\n"
"```"
msgstr ""

#: src/reference/features.md:144
msgid ""
"In this example, the `avif` feature will enable the two listed dependencies."
msgstr ""

#: src/reference/features.md:146
msgid ""
"**Note**: Another way to optionally include a dependency is to use [platform-"
"specific dependencies](specifying-dependencies.md#platform-specific-"
"dependencies). Instead of using features, these are conditional based on the "
"target platform."
msgstr ""

#: src/reference/features.md:152
msgid "Dependency features"
msgstr ""

#: src/reference/features.md:154
msgid ""
"Features of dependencies can be enabled within the dependency declaration. "
"The `features` key indicates which features to enable:"
msgstr ""

#: src/reference/features.md:157
msgid ""
"```toml\n"
"[dependencies]\n"
"# Enables the `derive` feature of serde.\n"
"serde = { version = \"1.0.118\", features = [\"derive\"] }\n"
"```"
msgstr ""

#: src/reference/features.md:163
msgid ""
"The [`default` features](#the-default-feature) can be disabled using "
"`default-features = false`:"
msgstr ""

#: src/reference/features.md:166
msgid ""
"```toml\n"
"[dependencies]\n"
"flate2 = { version = \"1.0.3\", default-features = false, features = "
"[\"zlib\"] }\n"
"```"
msgstr ""

#: src/reference/features.md:171
msgid ""
"**Note**: This may not ensure the default features are disabled. If another "
"dependency includes `flate2` without specifying `default-features = false`, "
"then the default features will be enabled. See [feature unification]"
"(#feature-unification) below for more details."
msgstr ""

#: src/reference/features.md:176
msgid ""
"Features of dependencies can also be enabled in the `[features]` table. The "
"syntax is `\"package-name/feature-name\"`. For example:"
msgstr ""

#: src/reference/features.md:179
msgid ""
"```toml\n"
"[dependencies]\n"
"jpeg-decoder = { version = \"0.1.20\", default-features = false }\n"
"\n"
"[features]\n"
"# Enables parallel processing support by enabling the \"rayon\" feature of "
"jpeg-decoder.\n"
"parallel = [\"jpeg-decoder/rayon\"]\n"
"```"
msgstr ""

#: src/reference/features.md:188
msgid ""
"**Note**: The `\"package-name/feature-name\"` syntax will also enable "
"`package-name` if it is an optional dependency. Experimental support for "
"disabling that behavior is available on the nightly channel via [weak "
"dependency features](unstable.md#weak-dependency-features)."
msgstr ""

#: src/reference/features.md:193
msgid "Command-line feature options"
msgstr ""

#: src/reference/features.md:195
msgid ""
"The following command-line flags can be used to control which features are "
"enabled:"
msgstr ""

#: src/reference/features.md:198
msgid ""
"`--features` _FEATURES_: Enables the listed features. Multiple features may "
"be separated with commas or spaces. If using spaces, be sure to use quotes "
"around all the features if running Cargo from a shell (such as `--features "
"\"foo bar\"`). If building multiple packages in a [workspace](workspaces."
"md), the `package-name/feature-name` syntax can be used to specify features "
"for specific workspace members."
msgstr ""

#: src/reference/features.md:205
msgid ""
"`--all-features`: Activates all features of all packages selected on the "
"command-line."
msgstr ""

#: src/reference/features.md:208
msgid ""
"`--no-default-features`: Does not activate the [`default` feature](#the-"
"default-feature) of the selected packages."
msgstr ""

#: src/reference/features.md:213
msgid "Feature unification"
msgstr ""

#: src/reference/features.md:215
msgid ""
"Features are unique to the package that defines them. Enabling a feature on "
"a package does not enable a feature of the same name on other packages."
msgstr ""

#: src/reference/features.md:218
msgid ""
"When a dependency is used by multiple packages, Cargo will use the union of "
"all features enabled on that dependency when building it. This helps ensure "
"that only a single copy of the dependency is used. See the [features section]"
"(resolver.md#features) of the resolver documentation for more details."
msgstr ""

#: src/reference/features.md:223
msgid ""
"For example, let's look at the [`winapi`](https://crates.io/crates/winapi) "
"package which uses a [large number](https://github.com/retep998/winapi-rs/"
"blob/0.3.9/Cargo.toml#L25-L431) of features. If your package depends on a "
"package `foo` which enables the \"fileapi\" and \"handleapi\" features of "
"`winapi`, and another dependency `bar` which enables the \"std\" and "
"\"winnt\" features of `winapi`, then `winapi` will be built with all four of "
"those features enabled."
msgstr ""

#: src/reference/features.md:229
msgid "![winapi features example](../images/winapi-features.svg)"
msgstr ""

#: src/reference/features.md:234
msgid ""
"A consequence of this is that features should be _additive_. That is, "
"enabling a feature should not disable functionality, and it should usually "
"be safe to enable any combination of features. A feature should not "
"introduce a [SemVer-incompatible change](#semver-compatibility)."
msgstr ""

#: src/reference/features.md:239
msgid ""
"For example, if you want to optionally support [`no_std`](../../reference/"
"names/preludes.html#the-no_std-attribute) environments, **do not** use a "
"`no_std` feature. Instead, use a `std` feature that _enables_ `std`. For "
"example:"
msgstr ""

#: src/reference/features.md:246 src/reference/features.md:249
msgid "\"std\""
msgstr ""

#: src/reference/features.md:251
msgid "// ...\n"
msgstr ""

#: src/reference/features.md:258
msgid "Mutually exclusive features"
msgstr ""

#: src/reference/features.md:260
msgid ""
"There are rare cases where features may be mutually incompatible with one "
"another. This should be avoided if at all possible, because it requires "
"coordinating all uses of the package in the dependency graph to cooperate to "
"avoid enabling them together. If it is not possible, consider adding a "
"compile error to detect this scenario. For example:"
msgstr ""

#: src/reference/features.md:267
msgid "\"foo\""
msgstr ""

#: src/reference/features.md:267
msgid "\"bar\""
msgstr ""

#: src/reference/features.md:268
msgid ""
"\"feature \\\"foo\\\" and feature \\\"bar\\\" cannot be enabled at the same "
"time\""
msgstr ""

#: src/reference/features.md:271
msgid ""
"Instead of using mutually exclusive features, consider some other options:"
msgstr ""

#: src/reference/features.md:273
msgid "Split the functionality into separate packages."
msgstr ""

#: src/reference/features.md:274
msgid ""
"When there is a conflict, [choose one feature over another](features-"
"examples.md#feature-precedence). The [`cfg-if`](https://crates.io/crates/cfg-"
"if) package can help with writing more complex `cfg` expressions."
msgstr ""

#: src/reference/features.md:277
msgid ""
"Architect the code to allow the features to be enabled concurrently, and use "
"runtime options to control which is used. For example, use a config file, "
"command-line argument, or environment variable to choose which behavior to "
"enable."
msgstr ""

#: src/reference/features.md:285
msgid "Inspecting resolved features"
msgstr ""

#: src/reference/features.md:287
msgid ""
"In complex dependency graphs, it can sometimes be difficult to understand "
"how different features get enabled on various packages. The [`cargo tree`]"
"(../commands/cargo-tree.md) command offers several options to help inspect "
"and visualize which features are enabled. Some options to try:"
msgstr ""

#: src/reference/features.md:292
msgid ""
"`cargo tree -e features`: This will show features in the dependency graph. "
"Each feature will appear showing which package enabled it."
msgstr ""

#: src/reference/features.md:294
msgid ""
"`cargo tree -f \"{p} {f}\"`: This is a more compact view that shows a comma-"
"spearated list of features enabled on each package."
msgstr ""

#: src/reference/features.md:296
msgid ""
"`cargo tree -e features -i foo`: This will invert the tree, showing how "
"features flow into the given package \"foo\". This can be useful because "
"viewing the entire graph can be quite large and overwhelming. Use this when "
"you are trying to figure out which features are enabled on a specific "
"package and why. See the example at the bottom of the [`cargo tree`](../"
"commands/cargo-tree.md) page on how to read this."
msgstr ""

#: src/reference/features.md:305
msgid "Feature resolver version 2"
msgstr ""

#: src/reference/features.md:307
msgid ""
"A different feature resolver can be specified with the `resolver` field in "
"`Cargo.toml`, like this:"
msgstr ""

#: src/reference/features.md:310
msgid ""
"```toml\n"
"[package]\n"
"name = \"my-package\"\n"
"version = \"1.0.0\"\n"
"resolver = \"2\"\n"
"```"
msgstr ""

#: src/reference/features.md:317
msgid ""
"See the [resolver versions](resolver.md#resolver-versions) section for more "
"detail on specifying resolver versions."
msgstr ""

#: src/reference/features.md:320
msgid ""
"The version `\"2\"` resolver avoids unifying features in a few situations "
"where that unification can be unwanted. The exact situations are described "
"in the [resolver chapter](resolver.md#feature-resolver-version-2), but in "
"short, it avoids unifying in these situations:"
msgstr ""

#: src/reference/features.md:325
msgid ""
"Features enabled on [platform-specific dependencies](specifying-dependencies."
"md#platform-specific-dependencies) for targets not currently being built are "
"ignored."
msgstr ""

#: src/reference/features.md:327
msgid ""
"[Build-dependencies](specifying-dependencies.md#build-dependencies) and proc-"
"macros do not share features with normal dependencies."
msgstr ""

#: src/reference/features.md:329
msgid ""
"[Dev-dependencies](specifying-dependencies.md#development-dependencies) do "
"not activate features unless building a target that needs them (like tests "
"or examples)."
msgstr ""

#: src/reference/features.md:332
msgid ""
"Avoiding the unification is necessary for some situations. For example, if a "
"build-dependency enables a `std` feature, and the same dependency is used as "
"a normal dependency for a `no_std` environment, enabling `std` would break "
"the build."
msgstr ""

#: src/reference/features.md:337
msgid ""
"However, one drawback is that this can increase build times because the "
"dependency is built multiple times (each with different features). When "
"using the version `\"2\"` resolver, it is recommended to check for "
"dependencies that are built multiple times to reduce overall build time. If "
"it is not _required_ to build those duplicated packages with separate "
"features, consider adding features to the `features` list in the [dependency "
"declaration](#dependency-features) so that the duplicates end up with the "
"same features (and thus Cargo will build it only once). You can detect these "
"duplicate dependencies with the [`cargo tree --duplicates`](../commands/"
"cargo-tree.md) command. It will show which packages are built multiple "
"times; look for any entries listed with the same version. See [Inspecting "
"resolved features](#inspecting-resolved-features) for more on fetching "
"information on the resolved features. For build dependencies, this is not "
"necessary if you are cross-compiling with the `--target` flag because build "
"dependencies are always built separately from normal dependencies in that "
"scenario."
msgstr ""

#: src/reference/features.md:353
msgid "Resolver version 2 command-line flags"
msgstr ""

#: src/reference/features.md:355
msgid ""
"The `resolver = \"2\"` setting also changes the behavior of the `--features` "
"and `--no-default-features` [command-line options](#command-line-feature-"
"options)."
msgstr ""

#: src/reference/features.md:358
msgid ""
"With version `\"1\"`, you can only enable features for the package in the "
"current working directory. For example, in a workspace with packages `foo` "
"and `bar`, and you are in the directory for package `foo`, and ran the "
"command `cargo build -p bar --features bar-feat`, this would fail because "
"the `--features` flag only allowed enabling features on `foo`."
msgstr ""

#: src/reference/features.md:364
msgid ""
"With `resolver = \"2\"`, the features flags allow enabling features for any "
"of the packages selected on the command-line with `-p` and `--workspace` "
"flags. For example:"
msgstr ""

#: src/reference/features.md:369
msgid ""
"# This command is allowed with resolver = \"2\", regardless of which "
"directory\n"
"# you are in.\n"
msgstr ""

#: src/reference/features.md:372
msgid "# This explicit equivalent works with any resolver version:\n"
msgstr ""

#: src/reference/features.md:377
msgid ""
"Additionally, with `resolver = \"1\"`, the `--no-default-features` flag only "
"disables the default feature for the package in the current directory. With "
"version \"2\", it will disable the default features for all workspace "
"members."
msgstr ""

#: src/reference/features.md:386
msgid "Build scripts"
msgstr ""

#: src/reference/features.md:388
msgid ""
"[Build scripts](build-scripts.md) can detect which features are enabled on "
"the package by inspecting the `CARGO_FEATURE_<name>` environment variable, "
"where `<name>` is the feature name converted to uppercase and `-` converted "
"to `_`."
msgstr ""

#: src/reference/features.md:394
msgid "Required features"
msgstr ""

#: src/reference/features.md:396
msgid ""
"The [`required-features` field](cargo-targets.md#the-required-features-"
"field) can be used to disable specific [Cargo targets](cargo-targets.md) if "
"a feature is not enabled. See the linked documentation for more details."
msgstr ""

#: src/reference/features.md:403
msgid "SemVer compatibility"
msgstr ""

#: src/reference/features.md:405
msgid ""
"Enabling a feature should not introduce a SemVer-incompatible change. For "
"example, the feature shouldn't change an existing API in a way that could "
"break existing uses. More details about what changes are compatible can be "
"found in the [SemVer Compatibility chapter](semver.md)."
msgstr ""

#: src/reference/features.md:410
msgid ""
"Care should be taken when adding and removing feature definitions and "
"optional dependencies, as these can sometimes be backwards-incompatible "
"changes. More details can be found in the [Cargo section](semver.md#cargo) "
"of the SemVer Compatibility chapter. In short, follow these rules:"
msgstr ""

#: src/reference/features.md:415
msgid "The following is usually safe to do in a minor release:"
msgstr ""

#: src/reference/features.md:416
msgid ""
"Add a [new feature](semver.md#cargo-feature-add) or [optional dependency]"
"(semver.md#cargo-dep-add)."
msgstr ""

#: src/reference/features.md:417
msgid ""
"[Change the features used on a dependency](semver.md#cargo-change-dep-"
"feature)."
msgstr ""

#: src/reference/features.md:418
msgid "The following should usually **not** be done in a minor release:"
msgstr ""

#: src/reference/features.md:419
msgid ""
"[Remove a feature](semver.md#cargo-feature-remove) or [optional dependency]"
"(semver.md#cargo-remove-opt-dep)."
msgstr ""

#: src/reference/features.md:420
msgid "[Moving existing public code behind a feature](semver.md#item-remove)."
msgstr ""

#: src/reference/features.md:421
msgid ""
"[Remove a feature from a feature list](semver.md#cargo-feature-remove-"
"another)."
msgstr ""

#: src/reference/features.md:423
msgid "See the links for caveats and examples."
msgstr ""

#: src/reference/features.md:433
msgid "Feature documentation and discovery"
msgstr ""

#: src/reference/features.md:435
msgid ""
"You are encouraged to document which features are available in your package. "
"This can be done by adding [doc comments](../../rustdoc/how-to-write-"
"documentation.html) at the top of `lib.rs`. As an example, see the [regex "
"crate source](https://github.com/rust-lang/regex/blob/1.4.2/src/lib.rs#L488-"
"L583), which when rendered can be viewed on [docs.rs](https://docs.rs/"
"regex/1.4.2/regex/#crate-features). If you have other documentation, such as "
"a user guide, consider adding the documentation there (for example, see "
"[serde.rs](https://serde.rs/feature-flags.html)). If you have a binary "
"project, consider documenting the features in the README or other "
"documentation for the project (for example, see [sccache](https://github.com/"
"mozilla/sccache/blob/0.2.13/README.md#build-requirements))."
msgstr ""

#: src/reference/features.md:443
msgid ""
"Clearly documenting the features can set expectations about features that "
"are considered \"unstable\" or otherwise shouldn't be used. For example, if "
"there is an optional dependency, but you don't want users to explicitly list "
"that optional dependency as a feature, exclude it from the documented list."
msgstr ""

#: src/reference/features.md:448
msgid ""
"Documentation published on [docs.rs](https://docs.rs/) can use metadata in "
"`Cargo.toml` to control which features are enabled when the documentation is "
"built. See [docs.rs metadata documentation](https://docs.rs/about/metadata) "
"for more details."
msgstr ""

#: src/reference/features.md:452
msgid ""
"**Note**: Rustdoc has experimental support for annotating the documentation "
"to indicate which features are required to use certain APIs. See the "
"[`doc_cfg`](../../unstable-book/language-features/doc-cfg.html) "
"documentation for more details. An example is the [`syn` documentation]"
"(https://docs.rs/syn/1.0.54/syn/#modules), where you can see colored boxes "
"which note which features are required to use it."
msgstr ""

#: src/reference/features.md:468
msgid "Discovering features"
msgstr ""

#: src/reference/features.md:470
msgid ""
"When features are documented in the library API, this can make it easier for "
"your users to discover which features are available and what they do. If the "
"feature documentation for a package isn't readily available, you can look at "
"the `Cargo.toml` file, but sometimes it can be hard to track it down. The "
"crate page on [crates.io](https://crates.io/) has a link to the source "
"repository if available. Tools like [`cargo vendor`](../commands/cargo-"
"vendor.md) or [cargo-clone-crate](https://crates.io/crates/cargo-clone-"
"crate) can be used to download the source and inspect it."
msgstr ""
